/*
 * Opera (.oex) Extensions Compatibility Layer - operaextensions_popup.min.js
 * https://github.com/operasoftware/operaextensions.js (ver: 0.91)
 * Copyright (c) 2013 Opera Software ASA 
 * License: The MIT License (https://github.com/operasoftware/operaextensions.js/blob/master/LICENSE)
 */
!function(e){function z(a,d,c){n?a[d].apply(a,c):l.push({target:a,methodName:d,args:c})}var h=function(){};h.prototype.REVISION="1";h.prototype.version=function(){return this.REVISION};h.prototype.buildNumber=function(){return this.REVISION};h.prototype.postError=function(a){console.log(a)};var j,v=!1;try{opera?(j=opera,v=!0):j=new h}catch(K){j=new h}h=null;try{h=chrome.app.getDetails()}catch(L){}e.navigator.browserLanguage=e.navigator.language;var n=!1,l=[],A={},o={},f="undefined"!==typeof window?
window:{},f=f.MutationObserver||f.WebKitMutationObserver;if("undefined"!==typeof process&&"[object process]"==={}.toString.call(process))f=function(a,d){process.nextTick(function(){a.call(d)})};else if(f){var w=[],f=new f(function(){var a=w.slice();w=[];a.forEach(function(a){a[0].call(a[1])})}),B=document.createElement("div");f.observe(B,{attributes:!0});f=function(a,d){w.push([a,d]);B.setAttribute("drainQueue","drainQueue")}}else f=function(a,d){setTimeout(function(){a.call(d)},1)};o.async=f;var G=
o.Event=function(a,d){this.type=a;for(var c in d)d.hasOwnProperty(c)&&(this[c]=d[c])},C=function(a,d){for(var c=0,b=a.length;c<b;c++)if(a[c][0]===d)return c;return-1},x=function(a){var d=a._promiseCallbacks;d||(d=a._promiseCallbacks={});return d},y=o.EventTarget={mixin:function(a){a.on=this.on;a.off=this.off;a.trigger=this.trigger;return a},on:function(a,d,c){for(var b=x(this),g,e,a=a.split(/\s+/),c=c||this;e=a.shift();)(g=b[e])||(g=b[e]=[]),-1===C(g,d)&&g.push([d,c])},off:function(a,d){for(var c=
x(this),b,g,a=a.split(/\s+/);b=a.shift();)d?(b=c[b],g=C(b,d),-1!==g&&b.splice(g,1)):c[b]=[]},trigger:function(a,d){var c,b,g,e;if(c=x(this)[a])for(var f=0,h=c.length;f<h;f++)b=c[f],g=b[0],b=b[1],"object"!==typeof d&&(d={detail:d}),e=new G(a,d),g.call(b,e)}},r=o.Promise=function(){this.on("promise:resolved",function(a){this.trigger("success",{detail:a.detail})},this);this.on("promise:failed",function(a){this.trigger("error",{detail:a.detail})},this)},D=function(){},E=function(a,d,c,b){var g,e;if(c)try{g=
c(b.detail)}catch(f){e=f}else g=b.detail;if(g instanceof r)g.then(function(a){d.resolve(a)},function(a){d.reject(a)});else if(c&&g)d.resolve(g);else if(e)d.reject(e);else d[a](g)};r.prototype={then:function(a,d){var c=new r;this.on("promise:resolved",function(d){E("resolve",c,a,d)});this.on("promise:failed",function(a){E("reject",c,d,a)});return c},resolve:function(a){o.async(function(){this.trigger("promise:resolved",{detail:a});this.isResolved=a},this);this.reject=this.resolve=D},reject:function(a){o.async(function(){this.trigger("promise:failed",
{detail:a});this.isRejected=a},this);this.reject=this.resolve=D}};y.mixin(r.prototype);var t=function(a,d){var c=d||{},b=new CustomEvent(a,!0,!0),g;for(g in c)b[g]=c[g];return b},f=function(){y.mixin(this)};f.prototype.constructor=f;f.prototype.addEventListener=function(a,d){this.on(a,d)};f.prototype.removeEventListener=function(a,d){this.off(a,d)};f.prototype.dispatchEvent=function(a){var d=a.type;if("function"===typeof this["on"+d.toLowerCase()])this.on(d,this["on"+d.toLowerCase()]);this.trigger(d,
a)};Object.create(r.prototype);for(var i in f.prototype);var u=function(a){y.mixin(this);this._isBackground=a||!1;this._localPort=null;this._isBackground||(this._localPort=chrome.extension.connect({name:""+Math.floor(1E16*Math.random())}),this._localPort.onDisconnect.addListener(function(){this.dispatchEvent(new t("disconnect",{source:this._localPort}));this._localPort=null}.bind(this)),a=function(a,c,b){var g=this._localPort;a&&a.action&&0===a.action.indexOf("___O_")?this.dispatchEvent(new t("controlmessage",
{data:a,source:{postMessage:function(a){g.postMessage(a)},tabId:c&&c.tab?c.tab.id:null}})):z(this,"dispatchEvent",[new t("message",{data:a,source:{postMessage:function(a){g.postMessage(a)},tabId:c&&c.tab?c.tab.id:null}})]);b&&b({})}.bind(this),this._localPort.onMessage.addListener(a),chrome.extension.onMessage.addListener(a),z(this,"dispatchEvent",[new t("connect",{source:this._localPort,origin:""})]))};u.prototype=Object.create(f.prototype);u.prototype.postMessage=function(a){this._isBackground?
this.broadcastMessage(a):this._localPort&&this._localPort.postMessage(a)};i=function(){u.call(this,!1)};i.prototype=Object.create(u.prototype);i.prototype.__defineGetter__("bgProcess",function(){return chrome.extension.getBackgroundPage()});var f=j.extension=j.extension||new i,p=j.contexts=j.contexts||{};i.prototype.getFile=function(a){var d=null;if("string"!=typeof a)return d;try{var c=chrome.extension.getURL("");0==a.indexOf("widget:")&&(a=a.replace("widget:","chrome-extension:"));0==a.indexOf("/")&&
(a=a.substring(1));var a=(-1==a.indexOf(c)?c:"")+a,b=new XMLHttpRequest;b.onloadend=function(){b.readyState==b.DONE&&200==b.status&&(result=b.response,result.name=a.substring(a.lastIndexOf("/")+1),result.lastModifiedDate=null,result.toString=function(){return"[object File]"},d=result)};b.open("GET",a,!1);b.responseType="blob";b.send(null)}catch(g){}return d};try{e.widget=widget||f.bgProcess.widget}catch(M){e.widget=f.bgProcess.widget}h&&(h.permissions&&-1!=h.permissions.indexOf("tabs"))&&(f.windows=
f.windows||f.bgProcess.opera.extension.windows);h&&(h.permissions&&-1!=h.permissions.indexOf("tabs"))&&(f.tabs=f.tabs||f.bgProcess.opera.extension.tabs);h&&(h.permissions&&-1!=h.permissions.indexOf("tabs"))&&(f.tabGroups=f.tabGroups||f.bgProcess.opera.extension.tabGroups);h&&(void 0!==h.browser_action&&null!==h.browser_action)&&(p.toolbar=p.toolbar||f.bgProcess.opera.contexts.toolbar);h&&(h.permissions&&-1!=h.permissions.indexOf("contextMenus"))&&(e.MenuItem=f.bgProcess.MenuItem,e.MenuContext=f.bgProcess.MenuContext,
p.menu=p.menu||f.bgProcess.opera.contexts.menu);h&&(h.speeddial&&e.opr&&e.opr.speeddial)&&(p.speeddial=p.speeddial||f.bgProcess.opera.contexts.speeddial);if(v)n=!0,opera.isReady=function(a){a.call(e);for(var a=0,d=l.length;a<d;a++){var c=l[a];c.target[c.methodName].apply(c.target,c.args)}l=[]};else{h=j;i=function(a,d){var c=a.addEventListener;a.addEventListener=function(b,g,f){b=b+"";b.toLowerCase()===d.toLowerCase()?g===void 0||(g===null||Object.prototype.toString.call(g)!=="[object Function]")||
(b.toLowerCase()==="domcontentloaded"&&!q||b.toLowerCase()==="load"&&!k||!n?m[d.toLowerCase()].push(g):g.call(e)):c.call(a,b,g,f)};a.__defineSetter__("on"+d.toLowerCase(),function(c){a.addEventListener(d.toLowerCase(),c,false)})};var s=function(a,d,c){var b=a.toLowerCase(),c=c||{};c.type=a;if(!c.target)c.target=d||e;if(!c.currentTarget)c.currentTarget=c.target;if(!c.srcElement)c.srcElement=c.target;if(c.bubbles!==true)c.bubbles=false;if(c.cancelable!==true)c.cancelable=false;if(!c.timeStamp)c.timeStamp=
0;for(var a=0,g=m[b].length;a<g;a++)m[b][a].call(d,c)},m={isready:[],readystatechange:[],domcontentloaded:[],load:[]},q=!1,k=!1;"interactive"===e.document.readyState&&(q=!0);"complete"===e.document.readyState&&(k=q=!0);e.document.addEventListener("DOMContentLoaded",function d(){q=true;e.document.removeEventListener("DOMContentLoaded",d,true)},!0);e.addEventListener("load",function c(){k=true;e.removeEventListener("load",c,true)},!0);e.document.addEventListener("readystatechange",function(c){c.stopImmediatePropagation();
c.stopPropagation();e.document.readyState!=="interactive"&&e.document.readyState!=="complete"?s("readystatechange",e.document):e.document.readyState="loading"},!0);var F=q||k?e.document.readyState:"loading";e.document.__defineSetter__("readyState",function(c){F=c});e.document.__defineGetter__("readyState",function(){return F});i(e,"load");i(e.document,"domcontentloaded");i(e,"domcontentloaded");i(e.document,"readystatechange");var H=(new Date).getTime()+24E4;(function b(){if((new Date).getTime()>=
H){console.warn("opera.isReady check timed out");k=true}else for(var g in A)if(A[g]!==true){e.setTimeout(function(){b()},20);return}e.setTimeout(function(){if(!n){for(var b=0,g=m.isready.length;b<g;b++)m.isready[b].call(e);m.isready=[];var f=(new Date).getTime()+12E4;(function I(){var b=(new Date).getTime();if(q||k||b>=f){e.document.readyState="interactive";s("readystatechange",e.document);s("domcontentloaded",e.document,{bubbles:true});b>=f&&console.warn("document.domcontentloaded event fired on check timeout");
var g=(new Date).getTime()+12E4;(function J(){var b=(new Date).getTime();if(k||b>=g){e.document.readyState="complete";s("readystatechange",e.document);s("load",e);b>=g&&console.warn("window.load event fired on check timeout");for(var b=0,f=l.length;b<f;b++){var h=l[b];h.target[h.methodName].apply(h.target,h.args)}l=[]}else e.setTimeout(function(){J()},50)})()}else e.setTimeout(function(){I()},50)})();n=true}},0)})();h.isReady=function(b){n?b.call(e):m.isready.push(b)}}v||(e.opera=j);opera.isReady(function(){function b(b){b=
b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");b=RegExp("[\\?&]"+b+"=([^&#]*)").exec(window.location.search);return b==null?"":window.decodeURIComponent(b[1].replace(/\+/g," "))}window.addEventListener("DOMContentLoaded",function(){var g=b("w"),e=b("h");document.body.style.minWidth=g!==""?g.replace(/\D/g,"")+"px":"300px";document.body.style.minHeight=e!==""?e.replace(/\D/g,"")+"px":"300px"},false)});opera.isReady(function(){document.addEventListener("DOMContentLoaded",function(){for(var b=["load",
"beforeunload","unload","click","dblclick","mouseover","mousemove","mousedown","mouseup","mouseout","keydown","keypress","keyup","blur","focus"],e=0,f=b.length;e<f;e++)for(var h=document.querySelectorAll("[on"+b[e]+"]"),i=0,j=h.length;i<j;i++){var l=new Function("e",h[i].getAttribute("on"+b[e])),k=h[i];b[e].indexOf("load")>-1&&h[i]===document.body&&(k=window);h[i].removeAttribute("on"+b[e]);k.addEventListener(b[e],l,true)}},false)})}(window);
